
export LANG=ja_JP.UTF-8
export EDITOR=emacs
export MAIL=/var/spool/mail/$USERNAME

# Default Permit
# file:644 directory:755
umask 022

cdpath=(.. ~ ~/src ~/zsh)

setopt auto_pushd
setopt auto_cd
setopt correct
setopt cdable_vars
setopt share_history

# ??
setopt notify
setopt globdots
setopt pushdtohome
setopt cdable_vars
setopt autolist
setopt correctall
setopt recexact
setopt longlistjobs
setopt autoresume
setopt noclobber
setopt pushdminus

# History
HISTFILE=~/.zsh_history
HISTSIZE=2000
SAVEHIST=100000
DIRSTACKSIZE=20

setopt hist_no_store      # historyコマンドをヒストリに記録しない
setopt hist_ignore_dups   # 直前と同じコマンドはヒストリに記録しない
#setopt extended_history   # ヒストリに詳細を記録する
setopt hist_reduce_blanks # 余計なスペースを削除してヒストリに記録する
setopt hist_ignore_space  # 行頭がスペースではじまるコマンドはヒストリに記録しない
setopt inc_append_history # 実行中のシェルを横断してヒストリに記録する
setopt share_history      # ヒストリのリアルタイム相互参照

# グロブ
setopt extended_glob      # 拡張グロブを有効にする
setopt numeric_glob_sort  # 数値ソートを有効にする(echo)
setopt rm_star_silent     # グロブでの削除時の確認メッセージを非表示にする
#setopt nomatch            # グロブマッチしないときにエラーとしない
#setopt null_glob          # グロブマッチしないときにメッセージを非表示にする


# alias
alias emacs='nocorrect emacs'
alias mv='nocorrect mv'
alias cp='nocorrect cp'
alias mkdir='nocorrect mkdir'
alias j=jobs
alias h=history
alias grep=egrep
alias ll='ls -l'
alias la='ls -la'
alias E='emacsclient -t'
alias kill-emacs="emacsclient -e '(kill-emacs)'"

# ディレクトリとディレクトリのシンボリックリンクのみ表示する
alias lsd='ls -ld *(-/DN)'

# "."で始まるファイルのみ表示する
alias lsa='ls -ld .*'

# global alias
alias -g M='|more'
alias -g H='|head'
alias -g T='|tail'
alias -g G='|grep'
alias -g GI='|grep -i'

alias -s php=emacs

# csh風のsetenv関数で定義
setenv () { typeset -x "${1}${1:+=}${(@)argv[2,$#]}" }

# autoloadされる関数を検索するパス
fpath=($fpath ~/.zfunc)

# 重複する要素を自動的に削除
typeset -U path cdpath fpath manpath

# プロンプトの設定
PROMPT="%{${fg[blue]}%}%m%{${fg[green]}%}%# "
RPROMPT=' %~'

# manマニュアルの配置されているディレクトリパス
manpath=(/usr/man /usr/lang/man /usr/local/man)
export manpath

zmodload -a zsh/stat stat
zmodload -a zsh/zpty zpty
zmodload -a zsh/zprof zprof
zmodload -ap zsh/mapfile mapfile

bindkey "^P" history-beginning-search-backward

# 補完
autoload -U compinit
compinit

bindkey -e

autoload -U colors
colors
